{% extends "vs_base.html" %}

{% load match_center_tags %}

{% block head-addition %}
    <script src="{{ STATIC_URL }}js/radar.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}/js/timeline.js" type="text/javascript"></script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.10/socket.io.min.js"></script>
    <script type="text/javascript"> window.matchId = {{selectedMatch}}; </script>
    <script src="{{ STATIC_URL }}js/radar_ui.js" type="text/javascript"></script>

    <link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/radar.css" />

    <script type="text/javascript">

    var valueMap = {1: "events",
        2: "narrations",
        3: "teamstats",
        4: "playerstats"};

    function handleSelect(elm)
    {
        $("#div-menu li.active").removeClass("active");
        $(elm).addClass("active");
        var url = '/new/partial/' + valueMap[elm.value] + "/{{ selectedMatch }}/";
        $("#data-area").load(url);
    }

    function refreshScreens()
    {
        var activeTab = $("#div-menu li.active").attr("value");
        var url = '/new/partial/' + valueMap[activeTab] + "/{{ selectedMatch }}/";
        $("#data-area").load(url);
    }

    function bindTimer(){
        setInterval(refreshScreens, 30000);
    }
    </script>

    <!-- refresh try -->
    <script type="text/javascript">
    $(document).ready(function(){
        bindTimer();

        $("#data-area").load('/new/partial/events/{{ selectedMatch }}/');

        var refreshFixture = function(){
            $(".fixture").load('/new/partial/fixture/{{ selectedMatch }}/', function(responseTxt,statusTxt,xhr){
                if(statusTxt=="success")
                    prepTimelinr();
            });
        }

        $("#div-menu .navbar li").click(function(){
            handleSelect(this);
        });

    });

    </script>
    <!-- end refresh try -->
{% endblock %}


{% block menu %}
    <div class="navbar navbar-static-top">
        <div class="navbar-inner">
            <ul class="nav">
                <li><a href="../before">MAÇ ÖNCESİ</a></li>
                <li class="active"><a href="../center">STADYUM</a></li>
                <li><a href="../table">MAÇ TAHTASI</a></li>
            </ul>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div class="row">
        <canvas id="slider"></canvas>
    </div>
    <div class="row">
        <div id="radarContainer">
               <button class="btn" id="pauseMatch"><i class="icon-play"></i></button>
               <span id="timeDisplay"></span></p>
        </div>
    </div>

    <div class="row" id="playerCardsContainer">
        <div class="span4 player-card" id="leftPlayerCard" style="display: none;">
        </div>

        <div class="span4 player-card" id="rightPlayerCard" style="display: none;">
        </div>
    </div>

    <div id="div-menu">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <ul class="nav">
                    <li class="active" value="1"><a>OLAYLAR</a></li>
                    <li value="2"><a>ANLATIM</a></li>
                    <li value="3"><a>TAKIM İSTATİSTİKLERİ</a></li>
                    <li value="4"><a>OYUNCU İSTATİSTİKLERİ</a></li>
                </ul>
            </div>
        </div>
    </div>


    <div class="data-area" id="data-area">
    </div>


{% endblock %}


